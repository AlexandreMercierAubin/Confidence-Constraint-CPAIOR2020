This is the code to add the Chance constraint to chuffed. 
I haven't touched this in years.
From what I recall, it can simply be dropped over chuffed and then build.
This was tested on an older version of Chuffed.
Perhaps it is better to salvage the constraint and directly implement it in the newest chuffed version.